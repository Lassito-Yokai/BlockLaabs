{% extends "base_auth.html" %}
{% block title %}Se connecter – DocuFlow{% endblock %}

{% block content %}
  <h2 class="text-3xl font-bold text-center mb-6">Connexion</h2>

  {# Erreurs globales (identifiants incorrects) et erreurs de champs #}
  {% if form.errors %}
    <ul class="messages mb-4">
      {% for err in form.non_field_errors %}
        <li class="error">{{ err }}</li>
      {% endfor %}
      {% for field in form %}
        {% for err in field.errors %}
          <li class="error">{{ err }}</li>
        {% endfor %}
      {% endfor %}
    </ul>
  {% endif %}

  <form method="post" action="{% url 'rawdocs:login' %}">
    {% csrf_token %}
    <div class="form-group">
      <label for="{{ form.username.id_for_label }}">{{ form.username.label }}</label>
      <input
        type="text"
        name="{{ form.username.html_name }}"
        id="{{ form.username.id_for_label }}"
        value="{{ form.username.value|default_if_none:'' }}"
        class="input"
        placeholder="Nom d’utilisateur ou email"
        required
      />
    </div>
    <div class="form-group">
      <label for="{{ form.password.id_for_label }}">{{ form.password.label }}</label>
      <input
        type="password"
        name="{{ form.password.html_name }}"
        id="{{ form.password.id_for_label }}"
        class="input"
        placeholder="Mot de passe"
        required
      />
    </div>
    <button type="submit" class="btn">Se connecter →</button>
  </form>

  <p class="mt-6 text-center text-sm text-gray-600">
    Pas encore de compte ?
    <a href="{% url 'rawdocs:register' %}" class="btn-outline">Inscrivez-vous</a>.
  </p>
{% endblock %}
